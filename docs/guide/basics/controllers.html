<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Controllers | Goyave</title>
    <meta name="description" content="An Elegant Golang Web Framework">
    <link rel="icon" type="image/png" sizes="16x16" href="/goyave/goyave_16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/goyave/goyave_32.png">
  <link rel="icon" type="image/png" sizes="64x64" href="/goyave/goyave_64.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/goyave/goyave_128.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/goyave/goyave_256.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/goyave/goyave_512.png">
  <meta property="twitter:title" content="Goyave">
  <meta property="twitter:description" content="An Elegant Golang Web Framework">
  <meta property="twitter:image:src" content="https://system-glitch.github.io/goyave/goyave_banner.png">
  <meta property="twitter:card" content="summary_large_image">
  <meta property="og:title" content="Goyave">
  <meta property="og:type" content="website">
  <meta property="og:description" content="An Elegant Golang Web Framework">
  <meta property="og:image" content="https://system-glitch.github.io/goyave/goyave_banner.png">
  <meta property="og:site_name" content="Goyave">
    
    <link rel="preload" href="/goyave/assets/css/0.styles.79261d3a.css" as="style"><link rel="preload" href="/goyave/assets/js/app.58da958a.js" as="script"><link rel="preload" href="/goyave/assets/js/2.e98777cd.js" as="script"><link rel="preload" href="/goyave/assets/js/16.66f5cb96.js" as="script"><link rel="prefetch" href="/goyave/assets/js/10.6a9d4641.js"><link rel="prefetch" href="/goyave/assets/js/11.f3b013f5.js"><link rel="prefetch" href="/goyave/assets/js/12.44bc0695.js"><link rel="prefetch" href="/goyave/assets/js/13.4786515c.js"><link rel="prefetch" href="/goyave/assets/js/14.3764a769.js"><link rel="prefetch" href="/goyave/assets/js/15.0ac76f37.js"><link rel="prefetch" href="/goyave/assets/js/17.6e41d592.js"><link rel="prefetch" href="/goyave/assets/js/18.2de1d1bf.js"><link rel="prefetch" href="/goyave/assets/js/19.d72d67f2.js"><link rel="prefetch" href="/goyave/assets/js/20.ecf0beaa.js"><link rel="prefetch" href="/goyave/assets/js/21.d7b17f63.js"><link rel="prefetch" href="/goyave/assets/js/22.b838cf84.js"><link rel="prefetch" href="/goyave/assets/js/23.8fef9985.js"><link rel="prefetch" href="/goyave/assets/js/24.61ce605e.js"><link rel="prefetch" href="/goyave/assets/js/25.a1ffdd10.js"><link rel="prefetch" href="/goyave/assets/js/26.48dcf7db.js"><link rel="prefetch" href="/goyave/assets/js/27.07a8a51a.js"><link rel="prefetch" href="/goyave/assets/js/28.06b7938d.js"><link rel="prefetch" href="/goyave/assets/js/29.512827f7.js"><link rel="prefetch" href="/goyave/assets/js/3.a964193e.js"><link rel="prefetch" href="/goyave/assets/js/4.cda9b5d2.js"><link rel="prefetch" href="/goyave/assets/js/5.8cff6807.js"><link rel="prefetch" href="/goyave/assets/js/6.ad56580a.js"><link rel="prefetch" href="/goyave/assets/js/7.89b74898.js"><link rel="prefetch" href="/goyave/assets/js/8.2e8722f8.js"><link rel="prefetch" href="/goyave/assets/js/9.da1fe802.js">
    <link rel="stylesheet" href="/goyave/assets/css/0.styles.79261d3a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/goyave/" class="home-link router-link-active"><img src="/goyave/goyave_64.png" alt="Goyave" class="logo"> <span class="site-name can-hide">Goyave</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/goyave/guide/" class="nav-link router-link-active">Guide</a></div> <a href="https://github.com/System-Glitch/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/goyave/guide/" class="nav-link router-link-active">Guide</a></div> <a href="https://github.com/System-Glitch/goyave" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>The Basics</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/goyave/guide/basics/routing.html" class="sidebar-link">Routing</a></li><li><a href="/goyave/guide/basics/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/goyave/guide/basics/requests.html" class="sidebar-link">Requests</a></li><li><a href="/goyave/guide/basics/controllers.html" class="active sidebar-link">Controllers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/goyave/guide/basics/controllers.html#defining-controllers" class="sidebar-link">Defining controllers</a></li><li class="sidebar-sub-header"><a href="/goyave/guide/basics/controllers.html#handlers" class="sidebar-link">Handlers</a></li><li class="sidebar-sub-header"><a href="/goyave/guide/basics/controllers.html#naming-conventions" class="sidebar-link">Naming conventions</a></li></ul></li><li><a href="/goyave/guide/basics/responses.html" class="sidebar-link">Responses</a></li><li><a href="/goyave/guide/basics/database.html" class="sidebar-link">Database</a></li><li><a href="/goyave/guide/basics/validation.html" class="sidebar-link">Validation</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Advanced</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="controllers"><a href="#controllers" class="header-anchor">#</a> Controllers</h1> <p></p><div class="table-of-contents"><ul><li><a href="#defining-controllers">Defining controllers</a></li><li><a href="#handlers">Handlers</a></li><li><a href="#naming-conventions">Naming conventions</a></li></ul></div><p></p> <h2 id="defining-controllers"><a href="#defining-controllers" class="header-anchor">#</a> Defining controllers</h2> <p>Controllers are files containing a collection of Handlers related to a specific feature. Each feature should have its own package. For example, if you have a controller handling user registration, user profiles, etc, you should create a <code>http/controller/user</code> package. Creating a package for each feature has the advantage of cleaning up route definitions a lot and helps keeping a clean structure for your project.</p> <p>Let's take a very simple CRUD as an example for a controller definition:
<strong>http/controllers/product/product.go</strong>:</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">Store</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span>
        Name<span class="token punctuation">:</span> request<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        Price<span class="token punctuation">:</span> request<span class="token punctuation">.</span><span class="token function">Numeric</span><span class="token punctuation">(</span><span class="token string">&quot;price&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    database<span class="token punctuation">.</span><span class="token function">GetConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">)</span>
    response<span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusCreated<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Show</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span>
    id<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseUint</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> database<span class="token punctuation">.</span><span class="token function">GetConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RecordNotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> product<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Update</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseUint</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
    product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span>
    db <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">GetConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RecordNotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Destroy</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseUint</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>
    product <span class="token operator">:=</span> model<span class="token punctuation">.</span>Product<span class="token punctuation">{</span><span class="token punctuation">}</span>
    db <span class="token operator">:=</span> database<span class="token punctuation">.</span><span class="token function">GetConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> db<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RecordNotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">Status</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        db<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>product<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Learn how to handle database errors <a href="https://gorm.io/docs/error_handling.html" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <h2 id="handlers"><a href="#handlers" class="header-anchor">#</a> Handlers</h2> <p>A <code>Handler</code> is a <code>func(*goyave.Response, *goyave.Request)</code>. The first parameter lets you write a response, and the second contains all the information extracted from the raw incoming request.</p> <p>Read about the available request information in the <a href="/goyave/guide/basics/requests.html">Requests</a> section.</p> <p>Controller handlers contain the business logic of your application. They should be concise and focused on what matters for this particular feature in your application. For example, if you develop a service manipulating images, the image processing code shouldn't be written in controller handlers. In that case, the controller handler would simply pass the correct parameters to your image processor and write a response.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// This handler receives an image, optimizes it and sends the result back.</span>
<span class="token keyword">func</span> <span class="token function">OptimizeImage</span><span class="token punctuation">(</span>response <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Response<span class="token punctuation">,</span> request <span class="token operator">*</span>goyave<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    optimizedImg <span class="token operator">:=</span> processing<span class="token punctuation">.</span><span class="token function">OptimizeImage</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;image&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    response<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> optimizedImg<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Setting the <code>Content-Type</code> header is not necessary. <code>response.Write</code> automatically detects the content type and sets the header accordingly, if the latter has not been defined already.</p></div> <h2 id="naming-conventions"><a href="#naming-conventions" class="header-anchor">#</a> Naming conventions</h2> <ul><li>Controller packages are named after the model they are mostly using, in a singular form. For example a controller for a <code>Product</code> model would be called <code>http/controllers/product</code>. If a controller isn't related to a model, then give it an expressive name.</li> <li>Controller handlers are always <strong>exported</strong> so they can be used when registering routes. All functions which aren't handlers <strong>must be unexported</strong>.</li> <li>CRUD operations naming and routing:</li></ul> <table><thead><tr><th>Method</th> <th>URI</th> <th>Handler name</th> <th>Description</th></tr></thead> <tbody><tr><td><code>GET</code></td> <td><code>/product</code></td> <td><code>Index()</code></td> <td>Get the products list</td></tr> <tr><td><code>POST</code></td> <td><code>/product</code></td> <td><code>Store()</code></td> <td>Create a product</td></tr> <tr><td><code>GET</code></td> <td><code>/product/{id}</code></td> <td><code>Show()</code></td> <td>Show a product</td></tr> <tr><td><code>PUT</code> or <code>PATCH</code></td> <td><code>/product/{id}</code></td> <td><code>Update()</code></td> <td>Update a product</td></tr> <tr><td><code>DELETE</code></td> <td><code>/product/{id}</code></td> <td><code>Destroy()</code></td> <td>Delete a product</td></tr></tbody></table></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/System-Glitch/goyave/edit/master/docs_src/src/guide/basics/controllers.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/goyave/guide/basics/requests.html" class="prev">Requests</a></span> <span class="next"><a href="/goyave/guide/basics/responses.html">Responses</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/goyave/assets/js/app.58da958a.js" defer></script><script src="/goyave/assets/js/2.e98777cd.js" defer></script><script src="/goyave/assets/js/16.66f5cb96.js" defer></script>
  </body>
</html>
